# Tentai Show Puzzle Generator Tools

This directory contains tools to generate and visualize Tentai Show (Spiral Galaxies) puzzles. These tools are simplified versions extracted from Simon Tatham's Portable Puzzle Collection, focused solely on generating valid puzzle data for use in other projects (like parallel solvers).

## 1. Simple Generator (`simple_generator.c`)

**Source:** Modified from [galaxies.c](https://github.com/franciscod/puzzles/blob/master/galaxies.c).

A standalone C program that generates valid Tentai Show puzzle grids. It removes all UI, solving, and game logic from the original code, keeping only the core generation algorithm.

### Compilation

```bash
gcc simple_generator.c -o simple_generator -lm
```

### Usage

```bash
./simple_generator [options]
```

### Options

| Option | Description | Default |
|--------|-------------|---------|
| `--size=WxH` | Set puzzle dimensions (Width x Height) | `7x7` |
| `--count=N` | Generate N puzzles | `1` |
| `--seed=N` | Set random seed (for reproducible results) | `time(NULL)` |
| `--help` | Show help message | - |

### Output Format

The generator outputs:
1. **Puzzle ID**: The encoded puzzle string (input for solvers).
2. **Visual Grid**: An ASCII representation of the solved state (ground truth).

**Example Output:**
```text
Puzzle 1:
Game ID: 5x5:pMxMdMbMzhMoMaMcMn

Grid 5x5 (internal 11x11):
Number of dots: 8

+-+-+-+-+-+
|· ·|○|· ·|
+ + +-+ + +
|· ·|·|·○·|
+ ○ +○+ + +
|· ·|·|· ·|
+ + +-+-+-+
|· ·|· ○ ·|
+-+-+-+-+-+
|○|○|· ○ ·|
+-+-+-+-+-+
```

### Grid Structure

The generator uses an internal grid size of `(2*W + 1) x (2*H + 1)` to represent tiles, edges, and vertices.
- **Tiles**: Where the regions are formed.
- **Edges**: Boundaries between tiles.
- **Vertices**: Intersections of edges.
- **Dots**: Centers of rotational symmetry (can be on tiles, edges, or vertices).

## 2. Decoder & Visualizer (`decoder.py`)

A Python script to decode the puzzle strings generated by `simple_generator` and visualize them or export data.

### Usage

```bash
python3 decoder.py <game_id> [options]
```

### Options

| Option | Description |
|--------|-------------|
| `--csv <file>` | Export dot positions to a CSV file |

### Example

```bash
python3 decoder.py '7x7:pMaMaMsMuMtMzMvMzkMzjMp'
```

**Output:**
- Grid dimensions (User & Internal)
- Total number of dots
- List of dot coordinates
- ASCII visualization of the grid

### CSV Export

To save the dot positions for processing by other tools:

```bash
python3 decoder.py '7x7:...' --csv dots.csv
```

**CSV Format:**
```csv
x,y,is_black
1,1,0
3,1,0
...
```

## Workflow Example

1. **Generate a batch of puzzles:**
   ```bash
   ./simple_generator --size=10x10 --count=5 > puzzles.txt
   ```

2. **Extract a Game ID** from `puzzles.txt`.

3. **Visualize or Export** using Python:
   ```bash
   python3 decoder.py '10x10:...' --csv puzzle_1.csv
   ```

4. **Use in Solver**: Parse the Game ID or CSV in your solver application.
